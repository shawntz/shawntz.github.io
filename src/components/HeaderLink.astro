---
import type { HTMLAttributes } from 'astro/types';

type Props = HTMLAttributes<'a'>;

const { href, class: className, ...props } = Astro.props;

const { pathname } = Astro.url;
const isActive = href === pathname || href === pathname.replace(/\/$/, '');
---

<a href={href} class:list={[className, 'nav-link', { active: isActive }]} {...props}>
	<slot />
</a>
<style>
	.nav-link {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		text-decoration: none;
		padding: 0.875rem 2rem; /* Increased horizontal padding for better proportions */
		font-weight: 600;
		font-size: 1rem;
		color: rgb(var(--black));
		background: white;
		border: 2px solid #000;
		box-shadow: 3px 3px 0px 0px rgba(0,0,0,1);
		transition: all 0.2s ease;
		position: relative;
		overflow: hidden;
		min-width: 120px; /* Increased minimum width for better proportions */
		height: 48px; /* Slightly increased height for better proportions */
		white-space: nowrap; /* Prevent text wrapping */
		box-sizing: border-box; /* Include border in sizing */
		font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; /* Force consistent font family */
		letter-spacing: 0.01em; /* Slight letter spacing for consistency */
		line-height: 1.2; /* Consistent line height */
	}
	
	.nav-link:hover {
		transform: translate(-2px, -2px);
		box-shadow: 5px 5px 0px 0px rgba(0,0,0,1);
		background: var(--primary-purple);
		color: white;
		/* Ensure hover state doesn't affect button size */
		min-width: 120px;
		height: 48px;
	}
	
	.nav-link:active {
		transform: translate(0, 0);
		box-shadow: 2px 2px 0px 0px rgba(0,0,0,1);
	}
	
	.nav-link.active {
		background: var(--primary-green);
		color: white;
		transform: translate(-1px, -1px);
		box-shadow: 4px 4px 0px 0px rgba(0,0,0,1);
		/* Ensure active state doesn't affect button size */
		min-width: 120px;
		height: 48px;
		position: relative;
	}

	
	.nav-link.active:hover {
		background: var(--primary-orange);
		transform: translate(-2px, -2px);
		box-shadow: 5px 5px 0px 0px rgba(0,0,0,1);
	}
	
	/* Dark mode */
	.dark .nav-link {
		color: #000;
		background: white;
	}
	
	.dark .nav-link:hover {
		background: var(--brutal-yellow);
		color: #000;
	}
	
	.dark .nav-link.active {
		background: var(--brutal-pink);
		color: #000;
	}
	
	.dark .nav-link.active:hover {
		background: var(--brutal-cyan);
		color: #000;
	}
	
	@media (max-width: 768px) {
		.nav-link {
			padding: 1.25rem 2rem; /* Increased padding for better mobile experience */
			width: 100%;
			text-align: center;
			font-size: 1.1rem;
			min-width: auto; /* Allow full width on mobile */
			height: 56px; /* Larger touch target on mobile */
		}
	}
</style>
